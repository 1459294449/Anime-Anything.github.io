<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动漫风格迁移工具 V2.0</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <h1>🎨 动漫头像生成器 V2.0</h1>
            <p>将您的图片转换为不同的动漫绘画风格</p>

            <!-- 用户状态区域 -->
            <div class="user-status">
                <!-- 未登录状态 -->
                <div id="userLoggedOut" class="user-actions">
                    <button id="loginBtn" class="auth-link-btn login-btn">🔑 登录</button>
                    <button id="registerBtn" class="auth-link-btn register-btn">📝 注册</button>
                </div>

                <!-- 已登录状态 -->
                <div id="userLoggedIn" class="user-info hidden">
                    <span class="welcome-text">👋 欢迎，<span id="currentUsername">用户</span></span>
                    <button id="logoutBtn" class="auth-link-btn logout-btn">🚪 退出</button>
                </div>
            </div>
        </header>

        <main>
            <div class="input-section">
                <!-- 图片输入方式选择 -->
                <div class="input-mode-tabs">
                    <button id="uploadModeBtn" class="tab-btn active">📁 上传图片</button>
                    <button id="urlModeBtn" class="tab-btn">🔗 URL链接</button>
                </div>

                <!-- 图片上传区域 -->
                <div id="uploadMode" class="input-mode active">
                    <div id="dropZone" class="drop-zone">
                        <div class="drop-content">
                            <div class="upload-icon">📤</div>
                            <h3>拖拽图片到此处</h3>
                            <p>或者 <button id="fileSelectBtn" class="file-select-btn">点击选择文件</button></p>
                            <small>支持 JPG、PNG、WEBP 格式，建议大小 &lt; 5MB</small>
                        </div>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                    </div>

                    <!-- 图片预览 -->
                    <div id="imagePreview" class="image-preview hidden">
                        <div class="preview-header">
                            <h4>📷 图片预览</h4>
                            <button id="changeImageBtn" class="change-btn">更换图片</button>
                        </div>
                        <img id="previewImage" alt="预览图片">
                        <div class="image-info">
                            <span id="imageInfo"></span>
                        </div>
                    </div>
                </div>

                <!-- URL输入区域 -->
                <div id="urlMode" class="input-mode">
                    <div class="input-group">
                        <label for="imageUrlInput">图片 URL：</label>
                        <input type="text" id="imageUrlInput"
                            placeholder="请输入公网可访问的图片URL，例如：https://example.com/image.jpg" class="input-field">
                        <small class="input-hint">
                            💡 提示：请确保图片 URL 可以公开访问，支持 HTTPS 链接
                        </small>
                    </div>
                </div>

                <!-- 风格描述 -->
                <div class="input-group">
                    <label for="promptInput">目标风格：</label>
                    <input type="text" id="promptInput" value="转换成法国绘本风格" placeholder="输入目标风格，如'转换成法国绘本风格'"
                        class="input-field">
                    <small class="input-hint">
                        💡 例如：转换成日式动漫风格、转换成法国绘本风格、转换成卡通风格等
                    </small>
                </div>

                <button id="convertButton" class="convert-btn">
                    <span class="btn-text">🚀 开始风格迁移</span>
                </button>
            </div>

            <div class="result-section">
                <div id="loadingDiv" class="loading hidden">
                    <div class="loading-spinner"></div>
                    <p>正在进行风格迁移，请稍候...</p>
                    <small>通常需要 30-60 秒，请耐心等待</small>
                </div>

                <div id="resultDiv" class="result hidden">
                    <h3>✨ 风格迁移结果</h3>
                    <div class="image-container">
                        <img id="resultImage" alt="风格迁移后的图片" class="result-image">
                    </div>
                    <div class="result-actions">
                        <button id="downloadButton" class="download-btn">💾 下载图片</button>
                        <button id="newTaskButton" class="new-task-btn">🎯 重新转换</button>
                    </div>
                </div>

                <div id="errorDiv" class="error hidden">
                    <h3>⚠️ 风格迁移失败</h3>
                    <p id="errorMessage"></p>
                    <button id="retryButton" class="retry-btn">🔄 重试</button>
                </div>
            </div>
        </main>

        <footer>
            <p>
                <small>
                    ⚡ 基于阿里云百炼 API |
                    <a href="https://github.com" target="_blank">GitHub</a> |
                    V2.0
                </small>
            </p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>

</html>